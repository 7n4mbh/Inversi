# Inversi

通常のオセロとは逆のルールで遊ぶ戦略ボードゲームです。

## 🎮 ゲーム概要

「ひっくり返さないオセロ」は、通常のオセロとは正反対のルールを持つ革新的なボードゲームです。プレイヤーは相手の駒をひっくり返**せない**場所にのみ駒を置くことができ、戦略的思考が要求されます。

## 📋 基本ルール

### 盤面と初期配置
- **盤面**: 8×8のボード（64マス）
- **初期配置**: 中央4マスに白黒交互に配置
  ```
  ・・・・・・・・
  ・・・・・・・・
  ・・・・・・・・
  ・・・○●・・・
  ・・・●○・・・
  ・・・・・・・・
  ・・・・・・・・
  ・・・・・・・・
  ```

### 駒の配置ルール

#### ✅ 必須条件
1. **隣接配置**: 既存の駒に隣接する場所（8方向のいずれか）に置く
2. **ひっくり返し禁止**: 相手の駒をひっくり返せる場所には置けない

#### ❌ 無効な手
- 既に駒が置かれているマス
- 隣接する駒がないマス
- 相手の駒をひっくり返してしまうマス

### ゲーム進行
1. **先手**: 黒から開始
2. **交代制**: プレイヤーが交互に駒を配置
3. **パス**: 有効な手がない場合は自動的にパス
4. **連続パス**: 両プレイヤーが連続でパスした場合はゲーム終了

### 勝敗条件
1. **主要勝利条件**: 有効な手がなくなったプレイヤーの負け
2. **副次勝利条件**: 盤面が埋まった場合は駒数の多い方が勝利
3. **引き分け**: 駒数が同じ場合は引き分け

## 🎯 戦略のポイント

### 基本戦略
- **相手を詰める**: 相手が有効な手を打てなくなるような配置を狙う
- **選択肢を保つ**: 自分の次の手の選択肢を多く残す
- **コーナー活用**: 角のマスは隣接数が少ないため戦略的に重要
- **辺の利用**: 辺のマスも制限が多く、戦略的価値が高い

### 上級戦略
- **相手の手を制限**: 相手が置ける場所を徐々に減らしていく
- **駒数バランス**: 終盤に向けて駒数のバランスを考慮する
- **形勢判断**: 盤面の状況を正確に読み取る能力が重要

## 🕹️ 操作方法

### 基本操作
- **駒を配置**: 緑色にハイライトされたマスをクリック
- **パス**: 有効な手がない場合は「パス」ボタンをクリック
- **ゲームリセット**: 「ゲームリセット」ボタンで新しいゲームを開始

### 画面の見方
- **緑色のマス**: 配置可能な場所
- **黄色の枠**: 有効な手のハイライト
- **駒数表示**: 各プレイヤーの現在の駒数
- **ターン表示**: 現在のプレイヤー
- **ゲーム状況**: 勝敗やゲーム終了の通知

## 🔧 技術仕様

### ファイル構成
```
inversi.html          # メインのゲーム画面
inversi-style.css     # スタイリング
inversi-script.js     # ゲームロジック
inversi-README.md     # このファイル
```

### 対応環境
- **ブラウザ**: Chrome, Firefox, Safari, Edge (ES6対応)
- **デバイス**: PC, タブレット, スマートフォン
- **レスポンシブ**: 画面サイズに応じて自動調整

### 実装機能
- [x] 8×8のゲームボード表示
- [x] 隣接チェック機能
- [x] ひっくり返し判定機能
- [x] 有効手のハイライト表示
- [x] ターン管理システム
- [x] 勝敗判定機能
- [x] パス機能
- [x] ゲームリセット機能
- [x] 駒数カウント表示
- [x] レスポンシブデザイン

## 🎲 通常のオセロとの違い

| 項目 | 通常のオセロ | ひっくり返さないオセロ |
|------|-------------|----------------------|
| 配置条件 | 相手の駒をひっくり返せる場所 | 隣接するが、ひっくり返せない場所 |
| 戦略 | 駒を多く取る | 相手を詰める |
| ゲーム性 | 攻撃的 | 守備的・戦略的 |
| 思考パターン | 取れる駒の数を計算 | 相手の選択肢を制限 |

## 🏆 楽しみ方

### 初心者向け
1. まずは基本ルールに慣れる
2. 隣接条件を意識した配置を練習
3. 相手の有効手を予測してみる

### 中級者向け
1. 複数手先を読む練習
2. コーナーや辺の戦略的活用
3. 駒数バランスを考慮した戦略

### 上級者向け
1. 完全読み切りを目指す
2. 複雑な局面での最適解探索
3. 相手の思考パターンの分析

## 🐛 注意事項

- JavaScript が無効になっている場合は動作しません
- 古いブラウザでは正常に動作しない可能性があります
- ゲーム中にページを更新すると進行状況がリセットされます

## 🚀 Azure Web Apps デプロイ

このアプリケーションをAzure Web Appsにデプロイする手順です。

### 前提条件
- Azureアカウント
- GitHub アカウント
- Azure Portal へのアクセス

### Step 1: Azure リソースの作成

1. **リソースグループの作成**
   - [Azure Portal](https://portal.azure.com) にログイン
   - 「リソースグループ」→「作成」
   - 名前: `inversi-rg`
   - リージョン: `Japan East`

2. **App Service の作成**
   - 「App Service」→「作成」
   - 基本設定:
     - リソースグループ: `inversi-rg`
     - 名前: `inversi-game-app` (ユニークな名前に変更)
     - 発行: `コード`
     - ランタイムスタック: `Node.js 18 LTS`
     - オペレーティングシステム: `Linux`
     - リージョン: `Japan East`
     - プラン: `Free F1` (無料プラン)

### Step 2: GitHub連携デプロイの設定

1. **デプロイメントセンターを開く**
   - 作成したApp Service → 「デプロイメントセンター」

2. **ソース設定**
   - ソース: `GitHub`
   - GitHub アカウントで認証

3. **リポジトリ設定**
   - 組織: `7n4mbh`
   - リポジトリ: `Inversi`
   - ブランチ: `deploy-webapps`

4. **ワークフロー設定**
   - ワークフローオプション: `Add a workflow` を選択
   - 認証タイプ: `Basic authentication` を選択

5. **保存して待機**
   - 「保存」をクリック
   - GitHub Actions ワークフローが自動生成される
   - 初回デプロイが開始される（数分かかります）

### Step 3: デプロイ確認

1. **デプロイ状況の確認**
   - GitHub リポジトリの「Actions」タブでビルド状況を確認
   - Azure Portal のデプロイメントセンターで進行状況を確認

2. **アプリケーションのテスト**
   - デプロイ完了後、`https://your-app-name.azurewebsites.net` にアクセス
   - ゲームが正常に動作することを確認
   - AI対戦モードもテスト

### Step 4: 継続的デプロイ

- `deploy-webapps` ブランチに変更をプッシュすると自動的に再デプロイされます
- GitHub Actions により自動ビルド・デプロイが実行されます

### ファイル構成（デプロイ用）

```
├── inversi.html              # メインゲーム画面
├── inversi-style.css         # スタイリング
├── inversi-script.js         # ゲームロジック（AI機能含む）
├── server.js                 # Express.js サーバー
├── package.json              # Node.js 依存関係
├── web.config                # IISNode 設定
└── README.md                 # このファイル
```

### トラブルシューティング

#### デプロイが失敗する場合
1. GitHub Actions のログを確認
2. Azure App Service の診断ログを確認
3. Node.js のバージョンが正しいか確認

#### アプリケーションが起動しない場合
1. Azure Portal → App Service → ログストリーム で エラーを確認
2. `package.json` の `start` スクリプトが正しいか確認
3. 環境変数 `PORT` が適切に設定されているか確認

#### 404エラーが発生する場合
1. `server.js` のルーティング設定を確認
2. 静的ファイルのパスが正しいか確認

### コスト管理

- **Free F1 プラン**: 月間 60分の CPU時間制限
- **Basic B1 プラン**: より多くのリソースが必要な場合（有料）
- 使用状況は Azure Portal の「メトリック」で監視可能

## 📝 更新履歴

- **v1.1.0**: AI対戦機能追加
  - Claude連携によるAI思考システム
  - 段階的思考演出で人間らしい反応
  - スタート画面でゲームモード選択
- **v1.0.1**: Azure Web Apps デプロイ対応
  - Express.js サーバー実装
  - GitHub Actions 自動デプロイ設定
- **v1.0.0**: 初期リリース
  - 基本的なゲーム機能を実装
  - レスポンシブデザイン対応
  - 日本語インターフェース

---

**🎯 このゲームは通常のオセロとは全く異なる戦略的思考を要求する、新しいタイプのボードゲームです。ぜひお楽しみください！**